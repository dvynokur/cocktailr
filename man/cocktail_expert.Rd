% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/cocktail_expert.R
\name{cocktail_expert}
\alias{cocktail_expert}
\title{Build a JUICE-readable expert system from Cocktail results}
\usage{
cocktail_expert(
  x,
  labels = NULL,
  min_phi = 0.2,
  top_k = NULL,
  fuzzy_sort = c("phi", "alpha", "none"),
  group_naming = c("id", "top1", "top2"),
  file = NULL
)
}
\arguments{
\item{x}{Either:
\itemize{
\item a Cocktail object (list with \code{Cluster.species}), or
\item a numeric matrix returned by \code{cocktail_fuzzy()} (species x nodes;
columns named like \code{"c_2127"}).
}}

\item{labels}{Character labels like \code{"c_2127"} or integer node IDs to include.
If \code{x} is a \eqn{\phi} matrix and \code{labels} is \code{NULL}, all columns are used.
If \code{x} is a Cocktail object, \code{labels} must be supplied.}

\item{min_phi}{Fuzzy only: keep species with \eqn{\phi \ge} \code{min_phi}. Default \code{0.20}.}

\item{top_k}{Fuzzy only: optional integer; after \code{min_phi} filtering keep only the
top \code{k} species by \eqn{\phi}. Default \code{NULL} = keep all that pass \code{min_phi}.}

\item{fuzzy_sort}{Fuzzy only: how to order species in the output -
\code{"phi"} (default; decreasing \eqn{\phi}), \code{"alpha"} (alphabetical by species),
or \code{"none"} (input order). \strong{Note:} group names are always derived from the
highest-\eqn{\phi} species, regardless of this setting.}

\item{group_naming}{Fuzzy only: how to name groups in the \code{"###"} header -
\code{"id"} (use the column label, e.g., \code{"c_2127"}), \code{"top1"} (highest-\eqn{\phi}
species + \code{-group}), or \code{"top2"} (top two \eqn{\phi} species joined by \code{-},
plus \code{-group}). Spaces are replaced with \code{-} and non-alphanumeric characters
are removed.}

\item{file}{Optional path to write a \code{.txt}. If \code{NULL} (default), the function
returns the text as a single character string.}
}
\value{
A single character string containing the expert-system text. If
\code{file} is provided, the text is written to disk and returned invisibly.
}
\description{
Produce a plain-text expert system where each group starts with a header line
\code{"### <group-name>"} followed by one species per line.
Works with either a Cocktail object (species lists per cluster) or a fuzzy
\eqn{\phi} matrix (species x nodes).
}
\details{
For Cocktail objects, each species is printed on its own line, indented with
five spaces. For \eqn{\phi} matrices, each line starts with \code{100 * phi}
formatted to one decimal place (e.g., \code{44.6}), followed by a space and the
species name. A blank line separates groups.
}
\seealso{
\code{species_in_clusters()}, \code{cocktail_fuzzy()}, \code{clusters_at_cut()}
}
