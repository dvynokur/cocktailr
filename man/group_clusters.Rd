% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/group_clusters.R
\name{group_clusters}
\alias{group_clusters}
\title{Partition Cocktail nodes (clusters) into k groups}
\usage{
group_clusters(
  x,
  phi_cut = 0.3,
  k_partition = 2L,
  method = c("kmeans", "hclust"),
  feature_scale = TRUE,
  kmeans_seed = NULL,
  dist_method = "manhattan",
  clust_method = "average",
  use_parallelDist = FALSE,
  use_fastcluster = FALSE
)
}
\arguments{
\item{x}{Cocktail object with \code{Cluster.height} and \code{Plot.cluster}.}

\item{phi_cut}{Numeric in (0,1). Keep all nodes with height ≥ \code{phi_cut}.}

\item{k_partition}{Positive integer, number of node groups to form.}

\item{method}{"kmeans" or "hclust".}

\item{feature_scale}{Logical; if \code{TRUE} (default), standardize plot-columns.}

\item{kmeans_seed}{Optional integer seed for reproducible k-means.}

\item{dist_method}{Distance for \code{method="hclust"} (default "manhattan").}

\item{clust_method}{Linkage for \code{method="hclust"} (default "average").}

\item{use_parallelDist}{Logical; if \code{TRUE}, try \code{parallelDist::parDist()}; fallback to \code{stats::dist()}.}

\item{use_fastcluster}{Logical; if \code{TRUE}, try \code{fastcluster::hclust()}; fallback to \code{stats::hclust()}.}
}
\value{
A named character vector mapping node labels (e.g., \code{"c_123"}) to
partition labels (\code{"g1"}, \code{"g2"}, …). Attributes:
\itemize{
\item \code{"clusters_for_assign"}: \strong{list of integer vectors} (one per \code{"g#"}), node IDs in each group.
\item \code{"details"}: list with method, \code{k_partition}, \code{phi_cut}, kept IDs/labels (pre/post dedup),
and (for hclust) the \code{hclust} object and settings.
}
}
\description{
Partitions \strong{nodes of the Cocktail tree} (i.e., internal clusters) into
\code{k_partition} groups using either k-means or hierarchical clustering.

Steps:
\enumerate{
\item \strong{Select nodes:} keep \strong{all} nodes whose height φ is \verb{>= phi_cut}
(no “topmost” filtering).
\item \strong{Feature matrix (nodes × plots):} take \code{x$Plot.cluster} columns for
the kept nodes and transpose to get rows = nodes, cols = plots.
\item \strong{Deduplicate identical nodes:} drop duplicates keeping the \strong{rightmost} node.
\item \strong{(Optional) scaling:} standardize plot-columns when \code{feature_scale = TRUE}.
\item \strong{Partition nodes:} k-means or hclust (Manhattan + UPGMA by default).
}
}
